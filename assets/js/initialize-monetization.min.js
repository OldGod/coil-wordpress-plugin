/*! Coil Monetize Content for WordPress v1.0.0 Monday 18th November 2019 16:08:51 PM GMT+0000 */
!function(s){var o=coil_params.content_container,i=coil_params.verifying_browser_extension,n=coil_params.browser_extension_missing,a=coil_params.verifying_coil_account,t=coil_params.unable_to_verify,c=coil_params.unable_to_verify_hidden,d=coil_params.loading_content,l=coil_params.admin_missing_id_notice,r=coil_params.post_excerpt,m=s("p.monetize-msg");if("undefined"==typeof coil_params)return;function g(e,t){var o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function p(){console.info("Showing content container"),document.querySelector(o).style.display="block"}function f(){if(console.info("displayVerificationFailureMessage called"),0<s("p.monetize-msg").length)if(s("p.monetize-msg").remove(),s("body").hasClass("coil-gate-all")){var e=s("div.coil-post-excerpt");0<e.length?e.after(g(t,"monetize-failed")):s(o).before(g(t,"monetize-failed"))}else s("body").hasClass("coil-gate-tagged-blocks")?(s("body").addClass("coil-split"),p(),s(o).before(g(c,"monetize-failed"))):s(o).before(g(t,"monetize-failed"))}s(document).ready(function(){if(document.body.classList.contains("monetization-not-initialized"))if(s("body").hasClass("coil-gate-all")&&void 0!==r&&void 0!==document.monetization&&"stopped"!==document.monetization.state&&s(o).before('<div class="entry-content coil-post-excerpt"><p>'+r+"</p></div>"),s("body").hasClass("coil-no-gating")||".content-area .entry-content"===o||s(o).not(".coil-post-excerpt").hide(),void 0!==document.monetization)"pending"===document.monetization.state?s("body").hasClass("coil-missing-id")?(s("body").hasClass("coil-show-admin-notice")?s(o).before('<p class="monetize-msg">'+l+"</p>"):s("body").removeClass("coil-missing-id"),s("body").hasClass("coil-no-gating")||".content-area .entry-content"===o||(p(),s(o+"*.coil-hide-monetize-users").css("display","none"),s(o+"*.coil-show-monetize-users").css("display","none")),s("body").trigger("coil-missing-id")):s("body").hasClass("coil-no-gating")||(s("body").hasClass("coil-gate-all")?"undefined"!==r?(console.info("Subscriber gating and no post excerpt"),s(o).before(g(i,""))):(console.info("Subscriber gating and has post excerpt"),s("div.coil-post-excerpt").after(g(i,""))):s(o).before(g(i,"")),setTimeout(function(){m.html(a)},2e3),setTimeout(function(){f()},5e3)):"started"===document.monetization.state?(console.info("Monetization state: Started"),s(o).before(g(d,""))):"stopped"===document.monetization.state&&(s("body").hasClass("coil-no-gating")||(console.info("Status stopped and Monetized and Public"),s(o).before(g(d,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(console.info("Monetization not started and verification failed"),s("p.monetize-msg").text()===d&&f())},5e3)),document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,s("body").hasClass("coil-no-gating")||".content-area .entry-content"===o||s(o).css("display",""),s("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),m.remove(),s("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),s("body").trigger("coil-monetization-initialized",[e]),0<s("p.monetize-msg").length&&(s("p.monetize-msg").remove(),p())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,o=e.detail.requestId,i=e.detail.amount,n=e.detail.assetCode,a=e.detail.assetScale;s("body").trigger("coil-monetization-progress",[e,t,o,i,n,a])});else{if(s("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),s("body").hasClass("coil-gate-all")||!s("body").hasClass("coil-no-gating")){var e=s("div.coil-post-excerpt"),t=s("div.entry-content");e.length?e.after(g(n,"")):t.length&&t.before(g(n,""))}s("body").hasClass("coil-no-gating")||".content-area .entry-content"===o||(p(),s(o+"*.coil-hide-monetize-users").css("display","none"),s(o+"*.coil-show-monetize-users").css("display","none")),s("body").trigger("coil-extension-not-found")}})}(jQuery);
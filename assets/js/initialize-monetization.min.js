/*! Coil Monetize Content for WordPress v1.0.0 Thursday 21st November 2019 16:13:40 PM GMT+0000 */
!function(r){var o=coil_params.content_container,n=coil_params.browser_extension_missing,t=coil_params.unable_to_verify,i=(coil_params.voluntary_donation,coil_params.loading_content),s=coil_params.post_excerpt,a=coil_params.admin_missing_id_notice,c=r("p.monetize-msg"),d=!0;if("undefined"==typeof coil_params)return;function l(e){!1!==d&&console.info(e)}function m(e,t){var o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function u(){l("Showing content container"),document.querySelector(o).style.display="block"}function f(){return'<div class="entry-content coil-post-excerpt"><p>'+s+"</p></div>"}function p(){return document.body.classList.contains("coil-no-gating")}function g(){return document.body.classList.contains("coil-gate-all")}function y(){return".content-area .entry-content"===o}function b(){return!!document.body.classList.contains("coil-show-excerpt")}function z(){if(l("Verification Failure"),0<r("p.monetize-msg").length)if(r("p.monetize-msg").remove(),g()){var e=r("div.coil-post-excerpt");0<e.length?e.after(m(t,"monetize-failed")):document.querySelector(o).before(m(t,"monetize-failed"))}else document.body.classList.contains("coil-gate-tagged-blocks")?(r("body").addClass("coil-split"),u(),document.querySelector(o).before(m(t,"monetize-failed")),l("Unable to verify hidden content")):(document.querySelector(o).before(m(t,"monetize-failed")),l("No tagged blocks"))}r(document).ready(function(){if(document.body.classList.contains("monetization-not-initialized"))if(g()&&void 0!==s&&void 0!==document.monetization&&"stopped"!==document.monetization.state&&document.querySelector(o).before(f()),p()||y()||document.querySelector(o).not(".coil-post-excerpt").hide(),void 0!==document.monetization)"pending"===document.monetization.state?r("body").hasClass("coil-missing-id")?(r("body").hasClass("coil-show-admin-notice")?document.querySelector(o).before('<p class="monetize-msg">'+a+"</p>"):r("body").removeClass("coil-missing-id"),p()||y()||(u(),r(o+"*.coil-hide-monetize-users").css("display","none"),r(o+"*.coil-show-monetize-users").css("display","none")),r("body").trigger("coil-missing-id")):p()||(g()?"undefined"!==s?(l("Subscriber gating and no post excerpt...Verifying extension"),document.querySelector(o).before(m(i,""))):(l("Subscriber gating and has post excerpt...Verifying extension"),r("div.coil-post-excerpt").after(m(i,""))):document.querySelector(o).before(m(i,"")),setTimeout(function(){l("Verifying Coil account"),c.html(i)},2e3),setTimeout(function(){z()},5e3)):"started"===document.monetization.state?(l("Monetization state: Started"),document.querySelector(o).before(m(i,""))):"stopped"===document.monetization.state&&(p()||(l("Status stopped and Monetized and Public"),b()&&document.querySelector(o).insertAdjacentHTML("beforebegin",f()),document.querySelector(o).insertAdjacentHTML("beforebegin",'<p class="monetize-msg">'+i+"</p>")),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(l("Monetization not started and verification failed"),r("p.monetize-msg").text()===i&&z())},5e3)),document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,p()||y()||u(),r("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),c.remove(),b()||r("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),r("body").trigger("coil-monetization-initialized",[e]),0<r("p.monetize-msg").length&&(r("p.monetize-msg").remove(),u())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,o=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;r("body").trigger("coil-monetization-progress",[e,t,o,n,i,s])});else{if(l("Coil Extension not found or using unsupported browser"),r("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),g()||!p()){var e=r("div.coil-post-excerpt"),t=r("div.entry-content");e.length?e.after(m(n,"")):t.length&&(b()&&document.querySelector(o).insertAdjacentHTML("beforebegin",f()),t.before(m(n,"")))}p()?l("Content is monetized and public but no extension found"):y()||(u(),r(o+"*.coil-hide-monetize-users").css("display","none"),r(o+"*.coil-show-monetize-users").css("display","none")),r("body").trigger("coil-extension-not-found")}})}(jQuery);
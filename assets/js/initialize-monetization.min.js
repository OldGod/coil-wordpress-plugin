/*! Coil Web Monetization for WordPress v1.1.0 Wednesday 29th January 2020 15:42:52 PM GMT+0000 */
!function(a){if("undefined"==typeof coil_params||!function(){try{return document.querySelector(coil_params.content_container),!0}catch(e){console.log("An error occured when attempting to retrieve the page.")}return!1}())return;var t=coil_params.content_container,e=coil_params.browser_extension_missing,o=coil_params.unable_to_verify,n=coil_params.voluntary_donation,i=coil_params.loading_content,s=coil_params.partial_gating,r=coil_params.post_excerpt,c=coil_params.admin_missing_id_notice,d=coil_params.learn_more_button_text,l=coil_params.learn_more_button_link,m=coil_params.site_logo,u=Boolean(coil_params.show_donation_bar),p=wp.template("subscriber-only-message"),g=wp.template("split-content-message"),b=wp.template("banner-message"),f=a("p.monetize-msg");function y(e,t){var o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function h(e){var t=document.createElement("div");t.classList.add("entry-content","coil-message-container");var o={headerLogo:m,title:"This content is for members only",content:e,button:{text:d,href:l}};return a(t).append(p(o)),t}function w(e){var t=document.createElement("div");t.classList.add("coil-banner-message-container");var o={content:e,button:{text:d,href:l}};return a(t).append(b(o)),t}function _(e){return g(e)}function v(){var e=document.querySelector(t);e&&(e.style.display="block")}function z(){if(""!==r){var e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=r,e}}function S(){return jQuery("p.coil-post-excerpt").remove()}function L(){return document.body.classList.contains("coil-no-gating")}function C(){return document.body.classList.contains("coil-gate-all")}function x(){return document.body.classList.contains("coil-gate-tagged-blocks")}function M(){return".content-area .entry-content"===t}function P(){return!!document.body.classList.contains("coil-show-excerpt")}function q(){0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),C()?P()&&z()?(document.body.classList.add("show-excerpt-message"),a(t).before(h(o)),a(t).prepend(z())):(document.body.classList.add("show-fw-message"),a(t).before(h(o))):x()?(a(".coil-show-monetize-users").prepend(_(o)),v(),T("ShowCoilPartialMsg")||(a("body").append(w(o)),E("ShowCoilPartialMsg"))):(document.body.classList.add("show-fw-message"),document.querySelector(t).before(h(o))))}function k(){return document.body.classList.contains("monetization-not-initialized")}function E(e){a("#js-coil-banner-dismiss").on("click",function(){T(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),a(this).parent().parent().remove())})}function T(e){var t=Cookies.get(e);return void 0!==t&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===t}a(document).ready(function(){if(k())if(L()||M()||a(t).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?a(t).before(y(c,"admin-message")):a("body").removeClass("coil-missing-id"),L()||M()||(v(),a(t+"*.coil-hide-monetize-users").css("display","none"),a(t+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):L()?u&&k()&&!T("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")):(C()?P()?document.querySelector(t).before(y(i,"")):a("p.coil-post-excerpt").after(y(i,"")):document.querySelector(t).before(y(i,"")),setTimeout(function(){S(),f.html(i)},2e3),setTimeout(function(){q()},5e3));break;case"started":document.querySelector(t).before(y(i,""));break;case"stopped":(C()||x())&&(S(),function(){var e=document.querySelector(t);e&&(e.style.display="none")}(),document.querySelector(t).before(y(i,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(a("p.monetize-msg").text()===i?q():L()&&u&&!T("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")))},5e3)}document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,L()||M()||(v(),document.body.classList.remove("show-fw-message"),P()&&S()),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),f.remove(),P()||a("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),S(),v())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,o=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,t,o,n,i,s])})}else a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),C()?(a(t).before(h(e)),P()&&z()?(document.body.classList.add("show-excerpt-message"),a(t).prepend(z())):document.body.classList.add("show-fw-message")):x()?(a(".coil-show-monetize-users").prepend(_(s)),v(),T("ShowCoilPartialMsg")||(a("body").append(w(s)),E("ShowCoilPartialMsg"))):L()&&u&&!T("ShowCoilPublicMsg")&&(a("body").append(w(n)),E("ShowCoilPublicMsg")),a("body").trigger("coil-extension-not-found")})}(jQuery);
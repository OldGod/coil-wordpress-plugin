/*! Coil Monetize Content for WordPress v1.0.0 Monday 25th November 2019 11:38:38 AM GMT+0000 */
!function(a){if("undefined"==typeof coil_params)return;var i=coil_params.content_container,n=coil_params.browser_extension_missing,t=coil_params.unable_to_verify,o=coil_params.voluntary_donation,s=coil_params.loading_content,r=coil_params.post_excerpt,d=coil_params.admin_missing_id_notice,c=a("p.monetize-msg"),l=!1;function m(e){!1!==l&&console.info(e)}function u(e,t){var i=document.createElement("p");return i.classList.add("monetize-msg"),t&&i.classList.add(t),i.innerHTML=e,i}function f(){m("Showing content container"),document.querySelector(i).style.display="block"}function p(){return document.body.classList.contains("coil-no-gating")}function g(){return document.body.classList.contains("coil-gate-all")}function z(){return".content-area .entry-content"===i}function b(){if(m("Verification Failure"),0<a("p.monetize-msg").length)if(a("p.monetize-msg").remove(),g()){var e=a("div.coil-post-excerpt");0<e.length?e.after(u(t,"monetize-failed")):a(i).before(u(t,"monetize-failed"))}else document.body.classList.contains("coil-gate-tagged-blocks")?(a("body").addClass("coil-split"),f(),a(i).before(u(t,"monetize-failed")),m("Unable to verify hidden content")):(a(i).before(u(t,"monetize-failed")),m("No tagged blocks"))}a(document).ready(function(){if(document.body.classList.contains("monetization-not-initialized"))if(g()&&void 0!==r&&void 0!==document.monetization&&"stopped"!==document.monetization.state&&a(i).before('<div class="entry-content coil-post-excerpt"><p>'+r+"</p></div>"),p()||z()||a(i).not(".coil-post-excerpt").hide(),void 0!==document.monetization)"pending"===document.monetization.state?a("body").hasClass("coil-missing-id")?(a("body").hasClass("coil-show-admin-notice")?a(i).before('<p class="monetize-msg">'+d+"</p>"):a("body").removeClass("coil-missing-id"),p()||z()||(f(),a(i+"*.coil-hide-monetize-users").css("display","none"),a(i+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):p()||(g()?"undefined"!==r?(m("Subscriber gating and no post excerpt...Verifying extension"),a(i).before(u(s,""))):(m("Subscriber gating and has post excerpt...Verifying extension"),a("div.coil-post-excerpt").after(u(s,""))):a(i).before(u(s,"")),setTimeout(function(){m("Verifying Coil account"),c.html(s)},2e3),setTimeout(function(){b()},5e3)):"started"===document.monetization.state?(m("Monetization state: Started"),a(i).before(u(s,""))):"stopped"===document.monetization.state&&(p()||(m("Status stopped and Monetized and Public"),a(i).before(u(s,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(m("Monetization not started and verification failed"),a("p.monetize-msg").text()===s&&b())},5e3)),document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,p()||z()||f(),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),c.remove(),a("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),f())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,i=e.detail.requestId,n=e.detail.amount,o=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,t,i,n,o,s])});else{if(m("Coil Extension not found or using unsupported browser"),a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),g()||!p()){var e=a("div.coil-post-excerpt"),t=a("div.entry-content");e.length?e.after(u(n,"")):t.length&&t.before(u(n,""))}p()?(m("Content is monetized and public but no extension found"),a(i).before(u(o,""))):z()||(f(),a(i+"*.coil-hide-monetize-users").css("display","none"),a(i+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-extension-not-found")}})}(jQuery);
/*! Coil Monetize Content for WordPress v1.0.1 Monday 25th November 2019 17:44:04 PM GMT+0000 */
!function(a){if("undefined"==typeof coil_params)return;var o=coil_params.content_container,n=coil_params.browser_extension_missing,t=coil_params.unable_to_verify,s=coil_params.voluntary_donation,r=coil_params.loading_content,c=coil_params.post_excerpt,d=coil_params.admin_missing_id_notice,l=a("p.monetize-msg"),m=!1;function u(e){!1!==m&&console.info(e)}function p(e,t){var o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function f(){u("Showing content container"),document.querySelector(o).style.display="block"}function b(){if(""!==c)return jQuery("<p>").addClass("coil-post-excerpt").text(c).prop("outerHTML")}function g(){return document.body.classList.contains("coil-no-gating")}function y(){return document.body.classList.contains("coil-gate-all")}function h(){return".content-area .entry-content"===o}function v(){return!!document.body.classList.contains("coil-show-excerpt")}function z(){if(u("Verification Failure"),0<a("p.monetize-msg").length)if(a("p.monetize-msg").remove(),y()){var e=a("div.coil-post-excerpt");0<e.length?e.after(p(t,"monetize-failed")):document.querySelector(o).before(p(t,"monetize-failed"))}else document.body.classList.contains("coil-gate-tagged-blocks")?(a("body").addClass("coil-split"),f(),document.querySelector(o).before(p(t,"monetize-failed")),u("Unable to verify hidden content")):(document.querySelector(o).before(p(t,"monetize-failed")),u("No tagged blocks"))}a(document).ready(function(){if(document.body.classList.contains("monetization-not-initialized"))if(y()&&void 0!==c&&void 0!==document.monetization&&"stopped"!==document.monetization.state&&""!==c&&document.querySelector(o).before(b()),g()||h()||document.querySelector(o).not(".coil-post-excerpt").hide(),void 0!==document.monetization)"pending"===document.monetization.state?a("body").hasClass("coil-missing-id")?(a("body").hasClass("coil-show-admin-notice")?a(o).before('<p class="monetize-msg">'+d+"</p>"):a("body").removeClass("coil-missing-id"),g()||h()||(f(),a(o+"*.coil-hide-monetize-users").css("display","none"),a(o+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):g()||(y()?""!==c?(u("Subscriber gating and no post excerpt...Verifying extension"),document.querySelector(o).before(p(r,""))):(u("Subscriber gating and has post excerpt...Verifying extension"),a("div.coil-post-excerpt").after(p(r,""))):document.querySelector(o).before(p(r,"")),setTimeout(function(){u("Verifying Coil account"),l.html(r)},2e3),setTimeout(function(){z()},5e3)):"started"===document.monetization.state?(u("Monetization state: Started"),document.querySelector(o).before(p(r,""))):"stopped"===document.monetization.state&&(g()||(u("Status stopped and Monetized and Public"),v()&&""!==c&&document.querySelector(o).insertAdjacentHTML("beforebegin",b()),document.querySelector(o).insertAdjacentHTML("beforebegin",'<p class="monetize-msg">'+r+"</p>")),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(a("p.monetize-msg").text()===r?(u("Monetization not started and verification failed"),z()):g()&&(u("Content is monetized and public but extension is stopped"),document.querySelector(o).before(p(s,""))))},5e3)),document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,g()||h()||f(),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),l.remove(),v()||a("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),f())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,o=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,t,o,n,i,s])});else{if(u("Coil Extension not found or using unsupported browser"),a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),y()||!g()){var e=a("div.coil-post-excerpt"),t=a("div.entry-content");e.length?e.after(p(n,"")):t.length&&(v()&&document.querySelector(o).insertAdjacentHTML("beforebegin",b()),document.querySelector(o).before(p(n,"")),document.querySelector(o).before(function(){var e=document.createElement("div");e.classList.add("fw-modal");var t=document.createElement("img");t.src="https://www.placehold.it/175x75";var o=document.createElement("p");o.classList.add("fw-modal-title"),o.textContent="This content is for subscribers only";var n=document.createElement("ul");n.classList.add("fw-modal-list");var s=["Get access to over 400 premium articles and videos.","Unlock exclusive member area with behind the scenes content.","Support my content creation to continue what I love."];for(i=0;i<s.length;i++){var a=document.createElement("li");a.textContent=s[i],n.appendChild(a)}var r=document.createElement("a");r.classList.add("fw-modal-button"),r.href="https://coil.com/learn-more/",r.textContent="Get Coil to access";var c=document.createElement("div");c.classList.add("fw-modal-footer");var d=document.createElement("img");d.src="https://www.placehold.it/175x75";var l=document.createElement("p");return l.classList.add("fw-modal-footer-content"),l.textContent="This content is for Coil Web Monetization enabled visitors only.  To access, subscribe to the Coil service using the link above. Coil requires use of a browser extension which is available for Chrome and Firefox browsers.  Alternatively on mobile the Puma browser can be used.",e.appendChild(t),e.appendChild(o),e.appendChild(n),e.appendChild(r),c.appendChild(d),c.appendChild(l),e.appendChild(c),e}()))}g()?(u("Content is monetized and public but no extension found"),a(o).before(p(s,""))):h()||(f(),a(o+"*.coil-hide-monetize-users").css("display","none"),a(o+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-extension-not-found")}})}(jQuery);
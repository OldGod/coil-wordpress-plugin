/*! Coil Monetize Content for WordPress v1.0.1 Wednesday 4th December 2019 19:35:35 PM GMT+0000 */
!function(a){if("undefined"==typeof coil_params)return;var e=coil_params.content_container,t=coil_params.browser_extension_missing,o=coil_params.unable_to_verify,i=coil_params.voluntary_donation,n=coil_params.loading_content,s=coil_params.partial_gating,c=coil_params.post_excerpt,r=coil_params.admin_missing_id_notice;site_logo=coil_params.site_logo;var d=wp.template("subscriber-only-message"),l=wp.template("split-content-message"),m=wp.template("banner-message"),u=a("p.monetize-msg");function p(e,t){var o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function g(e){var t=document.createElement("div");t.classList.add("entry-content","coil-message-container");var o={headerLogo:site_logo,title:"This content is for subscribers only",content:e,button:{text:"Get coil to access",href:"https://coil.com/learn-more/"}};return a(t).append(d(o)),t}function b(e){var t=document.createElement("div");t.classList.add("coil-banner-message-container");var o={content:e,button:{text:"Get Coil to access",href:"https://coil.com/learn-more/"}};return a(t).append(m(o)),t}function f(){document.querySelector(e).style.display="block"}function y(){if(""!==c){var e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=c,e}}function h(){return jQuery("p.coil-post-excerpt").remove()}function w(){return document.body.classList.contains("coil-no-gating")}function v(){return document.body.classList.contains("coil-gate-all")}function z(){return document.body.classList.contains("coil-gate-tagged-blocks")}function L(){return".content-area .entry-content"===e}function _(){return!!document.body.classList.contains("coil-show-excerpt")}function S(){0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),v()?_()&&y()?(document.body.classList.add("show-excerpt-message"),a(e).before(g(o)),a(e).prepend(y())):(document.body.classList.add("show-fw-message"),a(e).before(g(o))):z()?(document.body.classList.add("coil-split"),f(),document.querySelector(e).before(p(o,"monetize-failed"))):(document.body.classList.add("show-fw-message"),document.querySelector(e).before(g(o))))}function C(){return document.body.classList.contains("monetization-not-initialized")}function x(e){a("#js-coil-banner-dismiss").on("click",function(){M(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),a(this).parent().parent().remove())})}function M(e){var t=Cookies.get(e);return void 0!==t&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===t}a(document).ready(function(){if(C())if(w()||L()||a(e).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?a(e).before(p(r,"admin-message")):a("body").removeClass("coil-missing-id"),w()||L()||(f(),a(e+"*.coil-hide-monetize-users").css("display","none"),a(e+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):w()?C()&&!M("ShowCoilPublicMsg")&&(a("body").append(b(i)),x("ShowCoilPublicMsg")):(v()?_()?document.querySelector(e).before(p(n,"")):a("p.coil-post-excerpt").after(p(n,"")):document.querySelector(e).before(p(n,"")),setTimeout(function(){h(),u.html(n)},2e3),setTimeout(function(){S()},5e3));break;case"started":document.querySelector(e).before(p(n,""));break;case"stopped":(v()||z())&&(h(),document.querySelector(e).before(p(n,""))),setTimeout(function(){"undefined"==typeof monetizationStartEventOccurred&&(a("p.monetize-msg").text()===n?S():w()&&(M("ShowCoilPublicMsg")||(a("body").append(b(i)),x("ShowCoilPublicMsg"))))},5e3)}document.monetization.addEventListener("monetizationstart",function(e){e.detail.paymentPointer,e.detail.requestId;monetizationStartEventOccurred=!0,w()||L()||(f(),document.body.classList.remove("show-fw-message"),_()&&h()),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),u.remove(),_()||a("div.coil-post-excerpt").remove(),document.querySelectorAll("iframe, object, video").forEach(function(e){if(e.classList.contains("intrinsic-ignore")||e.parentNode.classList.contains("intrinsic-ignore"))return!0;e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),h(),f())}),document.monetization.addEventListener("monetizationprogress",function(e){var t=e.detail.paymentPointer,o=e.detail.requestId,i=e.detail.amount,n=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,t,o,i,n,s])})}else a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),v()?(L()?a(e).before(g(t)):a(e).html(g(t)),_()?(document.body.classList.add("show-excerpt-message"),a(e).prepend(y())):document.body.classList.add("show-fw-message")):z()?(a(".coil-show-monetize-users").prepend(function(e){return l(e)}(s)),M("ShowCoilPartialMsg")||(a("body").append(b(s)),x("ShowCoilPartialMsg"))):w()&&(M("ShowCoilPublicMsg")||(a("body").append(b(i)),x("ShowCoilPublicMsg"))),a("body").trigger("coil-extension-not-found")})}(jQuery);